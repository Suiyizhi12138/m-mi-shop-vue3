(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd7a3e56"],{"12cc":function(e,t,a){"use strict";a("2e51")},"2e51":function(e,t,a){},de78:function(e,t,a){"use strict";a.r(t);var s=a("7a23"),n=a("6ef0"),i=a.n(n),c=function(e){return Object(s["E"])("data-v-ddea7de4"),e=e(),Object(s["C"])(),e},o={class:"user-login-page"},l={class:"logo-content"},r=c((function(){return Object(s["j"])("img",{src:i.a,alt:""},null,-1)})),d=c((function(){return Object(s["j"])("p",null,"让每个人都能享受科技带来的乐趣",-1)})),u={class:"form-content"},p=c((function(){return Object(s["j"])("h3",{class:"form-title"},"小米账号登录",-1)})),j={class:"form-login"},O={class:"input-allow"},b=c((function(){return Object(s["j"])("p",null,[Object(s["l"])(" 已阅读并同意小米账号 "),Object(s["j"])("a",{href:"javascript:"},"用户协议"),Object(s["l"])("和 "),Object(s["j"])("a",{href:"javascript:"},"隐私政策")],-1)})),m={for:"",class:"label-forget"},f=Object(s["l"])(" 没有账号? "),v=Object(s["l"])("注册");function g(e,t,a,n,i,c){var g=Object(s["I"])("user-header"),w=Object(s["I"])("router-link");return Object(s["B"])(),Object(s["i"])("div",o,[Object(s["m"])(g),Object(s["j"])("div",l,[Object(s["m"])(w,{to:"/home"},{default:Object(s["T"])((function(){return[r]})),_:1}),d]),Object(s["j"])("div",u,[p,Object(s["j"])("form",j,[Object(s["U"])(Object(s["j"])("input",{type:"text",name:"email",id:"email",class:Object(s["v"])(["input-item input-phone",{"input-fail":e.validateOptions.emailMessage}]),placeholder:"请输入Email账号","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.email=t}),onInput:t[1]||(t[1]=function(){return n.checkEmail&&n.checkEmail.apply(n,arguments)})},null,34),[[s["Q"],e.email]]),Object(s["U"])(Object(s["j"])("label",{for:"email"},Object(s["M"])(e.validateOptions.emailMessage),513),[[s["R"],e.validateOptions.emailMessage]]),Object(s["U"])(Object(s["j"])("input",{type:"password",name:"password",id:"password",class:Object(s["v"])(["input-item input-password",{"input-fail":e.validateOptions.passwordMessage}]),placeholder:"请输入密码","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.password=t}),onInput:t[3]||(t[3]=function(){return n.checkPassword&&n.checkPassword.apply(n,arguments)})},null,34),[[s["Q"],e.password]]),Object(s["U"])(Object(s["j"])("label",{for:""},Object(s["M"])(e.validateOptions.passwordMessage),513),[[s["R"],e.validateOptions.passwordMessage]]),Object(s["h"])("",!0),Object(s["j"])("div",O,[Object(s["U"])(Object(s["j"])("input",{type:"checkbox",name:"check_rule",id:"rule","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.checked=t})},null,512),[[s["P"],e.checked]]),b]),Object(s["j"])("input",{type:"button",class:Object(s["v"])(["input-item input-button",{"btn-disabled":1==e.loginStatus}]),value:"登录",onClick:t[5]||(t[5]=function(){return n.onLogin&&n.onLogin.apply(n,arguments)})},null,2),Object(s["j"])("label",m,[f,Object(s["m"])(w,{to:"/user/register"},{default:Object(s["T"])((function(){return[v]})),_:1})])])])])}var w=a("5530"),h=(a("e7e5"),a("d399")),k=(a("498a"),a("ac1f"),a("00b4"),a("d3b7"),a("ee58")),M=a("21b5"),U=a("6c02"),_=a("5502"),V=a("bc3a"),E=a.n(V),I=a("f121"),P={components:{UserHeader:k["a"]},setup:function(){Object(U["d"])();var e=Object(s["F"])({email:"",password:"",checked:!1,validateOptions:{emailMessage:"",passwordMessage:"",isEmailValidated:!1,isPasswordValidated:!1},loginStatus:0}),t=Object(_["b"])(),a=function(){e.validateOptions.isEmailValidated=!0;var t=/^([a-zA-Z]|[0-9])(\w)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;""!==e.email.trim()?t.test(e.email)?e.validateOptions.emailMessage="":e.validateOptions.emailMessage="输入邮箱格式不正确":e.validateOptions.emailMessage="请输入邮箱"},n=function(){e.validateOptions.isPasswordValidated=!0;var t=/^(\w){6,20}$/;""!==e.password.trim()?t.test(e.password)?e.validateOptions.passwordMessage="":e.validateOptions.passwordMessage="密码长度为6-20为 且只能包含字母数字和下划线":e.validateOptions.passwordMessage="请输入密码"},i=function(){a(),n(),Promise.resolve().then((function(){e.validateOptions.isEmailValidated?e.validateOptions.isPasswordValidated?e.checked?c():h["a"].fail("请确认勾选用户协议和隐私政策"):h["a"].fail("请确认是否输入密码"):h["a"].fail("请确认是否输入邮箱")}))},c=function(){e.loginStatus=1,h["a"].loading("登录中");var a={email:e.email,password:e.password};M["a"].postLogin(a).then((function(a){e.loginStatus=2,localStorage.setItem("_user_token",a.data.access_token),t.dispatch("checkUserLoginStatus"),E.a.defaults.headers.common["Authorization"]="Bearer "+localStorage.getItem("_user_token"),h["a"].clear(),window.location.href=I["a"].DOMAIN+"/#/user"})).catch((function(t){e.loginStatus=3,console.log(t),h["a"].fail("登录失败")}))};return Object(w["a"])(Object(w["a"])({},Object(s["N"])(e)),{},{checkEmail:a,checkPassword:n,onLogin:i})}},S=(a("12cc"),a("6b0d")),y=a.n(S);const A=y()(P,[["render",g],["__scopeId","data-v-ddea7de4"]]);t["default"]=A}}]);
//# sourceMappingURL=chunk-cd7a3e56.4392b76a.js.map