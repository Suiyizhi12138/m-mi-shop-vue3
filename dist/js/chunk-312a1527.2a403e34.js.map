{"version":3,"sources":["webpack:///./src/views/user/UserRegister.vue","webpack:///./src/views/user/UserRegister.vue?56bd","webpack:///./src/views/user/UserRegister.vue?ecbd"],"names":["class","src","alt","href","to","type","name","id","validateOptions","nickNameMessage","placeholder","nickName","checkNickName","for","emailMessage","email","checkEmail","passwordMessage","password","checkPassword","checked","registerStatus","value","onRegister","components","UserHeader","setup","router","state","isNickNameValidated","isEmailValidated","isPasswordValidated","regexpEmail","trim","test","regexpPassword","Promise","resolve","then","fail","console","log","register","data","c_password","loading","postRegister","res","localStorage","setItem","access_token","defaults","headers","common","clear","push","catch","e","__exports__","render"],"mappings":"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","file":"js/chunk-312a1527.2a403e34.js","sourcesContent":["<template>\r\n  <!-- 用户注册页 -->\r\n  <div class=\"user-login-page\">\r\n    <user-header></user-header>\r\n    <div class=\"logo-content\">\r\n      <router-link to=\"/home\">\r\n      <img src=\"@/assets/images/login/logo-mi2.png\" alt />\r\n      </router-link>\r\n      <p>让每个人都能享受科技带来的乐趣</p>\r\n    </div>\r\n    <div class=\"form-content\">\r\n      <h3 class=\"form-title\">小米账号注册</h3>\r\n      <form class=\"form-login\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"nick_name\"\r\n          id=\"nick-name\"\r\n          class=\"input-item input-nick-name\"\r\n          placeholder=\"请输入昵称\"\r\n          :class=\"{'input-fail':validateOptions.nickNameMessage}\"         \r\n          v-model=\"nickName\"\r\n          @input=\"checkNickName\"\r\n        />\r\n        <label for=\"nick-name\" v-show=\"validateOptions.nickNameMessage\">{{validateOptions.nickNameMessage}}</label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"email\"\r\n          id=\"email\"\r\n          class=\"input-item input-phone\"\r\n          placeholder=\"请输入邮箱账号\"\r\n          :class=\"{'input-fail':validateOptions.emailMessage}\"\r\n          v-model=\"email\"\r\n          @input=\"checkEmail\"\r\n        />\r\n        <label for=\"email\" v-show=\"validateOptions.emailMessage\">{{validateOptions.emailMessage}}</label>\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          id=\"password\"\r\n          class=\"input-item input-password\"\r\n          placeholder=\"请输入密码\"\r\n          :class=\"{'input-fail':validateOptions.passwordMessage}\"\r\n          v-model=\"password\"\r\n          @input=\"checkPassword\"\r\n        />\r\n        <label for v-show=\"validateOptions.passwordMessage\">{{validateOptions.passwordMessage}}</label>\r\n        <div class=\"verify-content\" v-if=\"false\">\r\n          <input type=\"text\" name=\"verify_code\" class=\"input-item\" />\r\n          <img src alt class />\r\n        </div>\r\n        <div class=\"input-allow\">\r\n          <input type=\"checkbox\" name=\"check_rule\" id=\"rule\" v-model=\"checked\" />\r\n          <p>\r\n            已阅读并同意小米账号\r\n            <a href=\"javascript:\">用户协议</a>和\r\n            <a href=\"javascript:\">隐私政策</a>\r\n          </p>\r\n        </div>\r\n        <input\r\n          type=\"button\"\r\n          class=\"input-item input-button\"\r\n          value=\"注册\"\r\n          :class=\"{'btn-disabled':registerStatus==1}\"\r\n          @click=\"onRegister\"\r\n        />\r\n        \r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport UserHeader from \"./components/UserHeader\";\r\nimport { reactive, toRefs } from \"vue\";\r\nimport FetchAPI from \"@/utils/fetchApi\";\r\nimport { Toast } from \"vant\";\r\nimport Axios from 'axios'\r\nimport { useRouter } from 'vue-router'\r\nexport default {\r\n  components: {\r\n    UserHeader\r\n  },\r\n  setup() {\r\n    const router = useRouter()\r\n    const state = reactive({\r\n      nickName:'',\r\n      email: \"\",\r\n      password: \"\",\r\n      checked: false,\r\n      validateOptions: {\r\n        nickNameMessage:'',\r\n        emailMessage: \"\",\r\n        passwordMessage: \"\",\r\n        isNickNameValidated: false,\r\n        isEmailValidated: false,\r\n        isPasswordValidated: false\r\n      },\r\n      registerStatus: 0, //\r\n    });\r\n    //验证用户昵称\r\n    const checkNickName = () => {\r\n      state.validateOptions.isNickNameValidated = true;\r\n      if(state.nickName == \"\"){\r\n        state.validateOptions.nickNameMessage = '请输入昵称'\r\n        state.validateOptions.isNickNameValidated = false\r\n      }else{\r\n        state.validateOptions.nickNameMessage = ''\r\n      }\r\n    }\r\n    //验证邮箱\r\n    const checkEmail = () => {\r\n      state.validateOptions.isEmailValidated = true;\r\n      const regexpEmail = /^([a-zA-Z]|[0-9])(\\w)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/;\r\n      if (state.email.trim() === \"\") {\r\n        state.validateOptions.emailMessage = \"请输入邮箱\";\r\n        state.validateOptions.isEmailValidated = false\r\n        return;\r\n      }\r\n      if (regexpEmail.test(state.email)) {\r\n        state.validateOptions.emailMessage = \"\";\r\n      } else {\r\n        state.validateOptions.emailMessage = \"输入邮箱格式不正确\";\r\n        state.validateOptions.isEmailValidated = false\r\n      }\r\n    };\r\n    // 验证密码\r\n    const checkPassword = () => {\r\n      state.validateOptions.isPasswordValidated = true;\r\n      const regexpPassword = /^(\\w){6,20}$/;\r\n      if (state.password.trim() === \"\") {\r\n        state.validateOptions.passwordMessage = \"请输入密码\";\r\n        state.validateOptions.isPasswordValidated = false\r\n        return;\r\n      } else {\r\n        if (regexpPassword.test(state.password)) {\r\n          state.validateOptions.passwordMessage = \"\";\r\n        } else {\r\n          state.validateOptions.passwordMessage =\r\n            \"密码长度为6-20为 且只能包含字母数字和下划线\";\r\n          state.validateOptions.isPasswordValidated = false\r\n        }\r\n      }\r\n    };\r\n    //提交注册\r\n    const onRegister = () => {\r\n      checkNickName()\r\n      checkEmail()\r\n      checkPassword()\r\n      Promise.resolve().then(() => {\r\n        if(!state.validateOptions.isNickNameValidated){\r\n          Toast.fail('请确认是否输入昵称')\r\n          console.log('name fail')\r\n          return;\r\n        }\r\n        if (!state.validateOptions.isEmailValidated) {\r\n          Toast.fail(\"请确认是否输入邮箱\")\r\n          return;\r\n        }\r\n        if (!state.validateOptions.isPasswordValidated) {\r\n          Toast.fail(\"请确认是否输入密码\")\r\n          return;\r\n        } \r\n        if (!state.checked) {\r\n          Toast.fail(\"请确认勾选用户协议和隐私政策\")\r\n          return;\r\n        }\r\n        register();\r\n      });\r\n    };\r\n    //login method\r\n    const register = () => {\r\n      state.registerStatus = 1;\r\n      const data = {\r\n        name: state.nickName,\r\n        email: state.email,\r\n        password: state.password ,\r\n        c_password: state.password\r\n      }\r\n      Toast.loading('正在注册，请稍等')\r\n      FetchAPI.postRegister(data)\r\n        .then(res => {\r\n          state.registerStatus = 2;\r\n          //localStorage.removeItem('_user_token');\r\n          localStorage.setItem('_user_token',res.data.access_token);\r\n          Axios.defaults.headers.common['Authorization'] = 'Bearer ' + res.data.access_token;\r\n          //window.location.href = (Config.DOMAIN);\r\n          Toast.clear()\r\n          router.push({name: 'home'})\r\n          \r\n        })\r\n        .catch((e) => {\r\n          state.registerStatus = 3;\r\n          Toast.fail('注册失败')\r\n          console.log(e)\r\n        });\r\n    };\r\n    return {\r\n      ...toRefs(state),\r\n      checkNickName,\r\n      checkEmail,\r\n      checkPassword,\r\n      onRegister,\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.user-login-page {\r\n  @media screen and(min-height: 667px) {\r\n    div.form-content {\r\n      margin-top: 30px;\r\n    }\r\n    div.logo-content {\r\n      margin-top: 60px;\r\n    }\r\n  }\r\n  @media screen and(min-height: 812px) {\r\n    div.form-content {\r\n      margin-top: 60px;\r\n    }\r\n    div.logo-content {\r\n      margin-top: 120px;\r\n    }\r\n  }\r\n  @media screen and(min-height: 900px) {\r\n    div.form-content {\r\n      margin-top: 80px;\r\n    }\r\n    div.logo-content {\r\n      margin-top: 160px;\r\n    }\r\n  }\r\n  .logo-content {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    img {\r\n      width: 50px;\r\n      height: 50px;\r\n    }\r\n    p {\r\n      margin-top: 20px;\r\n      font-size: 14px;\r\n      color: #999;\r\n    }\r\n  }\r\n  .form-content {\r\n    padding: 0 16px;\r\n  }\r\n  text-align: left;\r\n  .form-title {\r\n    font-size: 18px;\r\n    font-weight: 700;\r\n    text-align: left;\r\n    padding: 20px 0;\r\n  }\r\n  .form-login {\r\n    display: flex;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    .input-item {\r\n      display: block;\r\n      height: 50px;\r\n      width: 320px;\r\n      border: 2px solid #f5f5f5;\r\n      background-color: #f5f5f5;\r\n      border-radius: 25px;\r\n      font-size: 16px;\r\n      box-sizing: border-box;\r\n      padding-left: 20px;\r\n      margin-bottom: 12px;\r\n      transition: all 0.3s linear;\r\n\r\n      &:focus {\r\n        border: 2px solid blue;\r\n      }\r\n    }\r\n    input.input-fail {\r\n      border-color: #ff2300;\r\n    }\r\n    label {\r\n      padding-left: 16px;\r\n      margin-top: -10px;\r\n      margin-bottom: 12px;\r\n      color: #ff6700;\r\n      display: block;\r\n      align-self: start;\r\n    }\r\n    .input-allow {\r\n      display: flex;\r\n      align-items: center;\r\n      p {\r\n        padding-left: 8px;\r\n        font-size: 14px;\r\n        a {\r\n          color: #0f86ff;\r\n        }\r\n      }\r\n    }\r\n    .input-button {\r\n      margin-top: 12px;\r\n      background-color: #ff6700;\r\n      color: #fff;\r\n      &:focus {\r\n        border: none;\r\n      }\r\n    }\r\n    input.btn-disabled{\r\n      background-color: rgba(0,0,0,.3);\r\n    }\r\n    label.label-forget {\r\n      color: #0f86ff;\r\n      margin-top: 40px;\r\n      a {\r\n        color: #ff6700;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import { render } from \"./UserRegister.vue?vue&type=template&id=9be52326&scoped=true\"\nimport script from \"./UserRegister.vue?vue&type=script&lang=js\"\nexport * from \"./UserRegister.vue?vue&type=script&lang=js\"\n\nimport \"./UserRegister.vue?vue&type=style&index=0&id=9be52326&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\Doc\\\\web\\\\Vue\\\\App\\\\m-mi-shop\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9be52326\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./UserRegister.vue?vue&type=style&index=0&id=9be52326&lang=scss&scoped=true\""],"sourceRoot":""}