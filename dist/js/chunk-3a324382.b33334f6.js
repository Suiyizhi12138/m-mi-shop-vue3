(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a324382"],{"5bc5":function(e,t,a){},d8b2:function(e,t,a){"use strict";a("5bc5")},de78:function(e,t,a){"use strict";a.r(t);var s=a("7a23"),n=a("6ef0"),i=a.n(n),c=function(e){return Object(s["E"])("data-v-64954eba"),e=e(),Object(s["C"])(),e},o={class:"user-login-page"},l={class:"logo-content"},r=c((function(){return Object(s["j"])("img",{src:i.a,alt:""},null,-1)})),d=c((function(){return Object(s["j"])("p",null,"让每个人都能享受科技带来的乐趣",-1)})),u={class:"form-content"},p=c((function(){return Object(s["j"])("h3",{class:"form-title"},"小米账号登录",-1)})),b={class:"form-login"},j={class:"input-allow"},O=c((function(){return Object(s["j"])("p",null,[Object(s["l"])(" 已阅读并同意小米账号 "),Object(s["j"])("a",{href:"javascript:"},"用户协议"),Object(s["l"])("和 "),Object(s["j"])("a",{href:"javascript:"},"隐私政策")],-1)})),m={for:"",class:"label-forget"},f=Object(s["l"])(" 没有账号? "),g=Object(s["l"])("注册");function v(e,t,a,n,i,c){var v=Object(s["I"])("user-header"),w=Object(s["I"])("router-link");return Object(s["B"])(),Object(s["i"])("div",o,[Object(s["m"])(v),Object(s["j"])("div",l,[Object(s["m"])(w,{to:"/home"},{default:Object(s["T"])((function(){return[r]})),_:1}),d]),Object(s["j"])("div",u,[p,Object(s["j"])("form",b,[Object(s["U"])(Object(s["j"])("input",{type:"text",name:"email",id:"email",class:Object(s["v"])(["input-item input-phone",{"input-fail":e.validateOptions.emailMessage}]),placeholder:"请输入Email账号","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.email=t}),onInput:t[1]||(t[1]=function(){return n.checkEmail&&n.checkEmail.apply(n,arguments)})},null,34),[[s["Q"],e.email]]),Object(s["U"])(Object(s["j"])("label",{for:"email"},Object(s["M"])(e.validateOptions.emailMessage),513),[[s["R"],e.validateOptions.emailMessage]]),Object(s["U"])(Object(s["j"])("input",{type:"password",name:"password",id:"password",class:Object(s["v"])(["input-item input-password",{"input-fail":e.validateOptions.passwordMessage}]),placeholder:"请输入密码","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.password=t}),onInput:t[3]||(t[3]=function(){return n.checkPassword&&n.checkPassword.apply(n,arguments)})},null,34),[[s["Q"],e.password]]),Object(s["U"])(Object(s["j"])("label",{for:""},Object(s["M"])(e.validateOptions.passwordMessage),513),[[s["R"],e.validateOptions.passwordMessage]]),Object(s["h"])("",!0),Object(s["j"])("div",j,[Object(s["U"])(Object(s["j"])("input",{type:"checkbox",name:"check_rule",id:"rule","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.checked=t})},null,512),[[s["P"],e.checked]]),O]),Object(s["j"])("input",{type:"button",class:Object(s["v"])(["input-item input-button",{"btn-disabled":1==e.loginStatus}]),value:"登录",onClick:t[5]||(t[5]=function(){return n.onLogin&&n.onLogin.apply(n,arguments)})},null,2),Object(s["j"])("label",m,[f,Object(s["m"])(w,{to:"/user/register"},{default:Object(s["T"])((function(){return[g]})),_:1})])])])])}var w=a("5530"),h=(a("e7e5"),a("d399")),k=(a("498a"),a("ac1f"),a("00b4"),a("d3b7"),a("ee58")),M=a("21b5"),U=a("6c02"),_=a("5502"),V=a("bc3a"),E=a.n(V),P=(a("f121"),{components:{UserHeader:k["a"]},setup:function(){var e=Object(U["d"])(),t=Object(s["F"])({email:"",password:"",checked:!1,validateOptions:{emailMessage:"",passwordMessage:"",isEmailValidated:!1,isPasswordValidated:!1},loginStatus:0}),a=Object(_["b"])(),n=function(){t.validateOptions.isEmailValidated=!0;var e=/^([a-zA-Z]|[0-9])(\w)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;""!==t.email.trim()?e.test(t.email)?t.validateOptions.emailMessage="":t.validateOptions.emailMessage="输入邮箱格式不正确":t.validateOptions.emailMessage="请输入邮箱"},i=function(){t.validateOptions.isPasswordValidated=!0;var e=/^(\w){6,20}$/;""!==t.password.trim()?e.test(t.password)?t.validateOptions.passwordMessage="":t.validateOptions.passwordMessage="密码长度为6-20为 且只能包含字母数字和下划线":t.validateOptions.passwordMessage="请输入密码"},c=function(){n(),i(),Promise.resolve().then((function(){t.validateOptions.isEmailValidated?t.validateOptions.isPasswordValidated?t.checked?o():h["a"].fail("请确认勾选用户协议和隐私政策"):h["a"].fail("请确认是否输入密码"):h["a"].fail("请确认是否输入邮箱")}))},o=function(){t.loginStatus=1,h["a"].loading("登录中");var s={email:t.email,password:t.password};M["a"].postLogin(s).then((function(s){t.loginStatus=2,localStorage.setItem("_user_token",s.data.access_token),a.dispatch("checkUserLoginStatus"),E.a.defaults.headers.common["Authorization"]="Bearer "+localStorage.getItem("_user_token"),h["a"].clear(),e.go(-1)})).catch((function(e){t.loginStatus=3,console.log(e),h["a"].fail("登录失败")}))};return Object(w["a"])(Object(w["a"])({},Object(s["N"])(t)),{},{checkEmail:n,checkPassword:i,onLogin:c})}}),S=(a("d8b2"),a("6b0d")),y=a.n(S);const I=y()(P,[["render",v],["__scopeId","data-v-64954eba"]]);t["default"]=I}}]);
//# sourceMappingURL=chunk-3a324382.b33334f6.js.map